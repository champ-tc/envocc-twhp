import React, { useState } from "react";
import { FileText, CheckCircle2 } from "lucide-react";

interface PDPAModalProps {
    isOpen: boolean;
    onConfirm: () => void;
}

export default function PDPAModal({ isOpen, onConfirm }: PDPAModalProps) {
    const [acknowledged, setAcknowledged] = useState(false);

    if (!isOpen) return null;

    return (
        <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4">
            <div className="bg-white rounded-2xl shadow-2xl max-w-3xl w-full flex flex-col max-h-[90vh] overflow-hidden">
                {/* Header */}
                <div className="p-6 bg-[#2E8B57] text-white flex items-center gap-3">
                    <FileText size={28} />
                    <h2 className="text-xl md:text-2xl font-bold">PDPA</h2>
                </div>

                {/* Content (Scrollable) */}
                <div className="p-6 overflow-y-auto text-gray-700 space-y-4 text-sm md:text-base leading-relaxed h-full bg-gray-50">
                    <h3 className="font-bold text-lg text-black text-center">
                        คำประกาศเกี่ยวกับความเป็นส่วนตัว (Privacy Notice) <br />
                        ของระบบประเมินออนไลน์สถานประกอบการปลอดโรค ปลอดภัย กายใจเป็นสุข
                    </h3>
                    <div className="indent-8">
                        <p>
                            กองโรคจากการประกอบอาชีพและสิ่งแวดล้อม ระบบประเมินออนไลน์สถานประกอบการปลอดโรค ปลอดภัย
                            กายใจเป็นสุข (ซึ่งต่อไปในประกาศนี้ เรียกว่า “กิจกรรมการประมวลผล”) ได้ทราบและเข้าใจรูปแบบการเก็บรวบรวม
                            ใช้ และเปิดเผย (“ประมวลผล”) ข้อมูลส่วนบุคคลที่ กองโรคจากการประกอบอาชีพและสิ่งแวดล้อม (ซึ่งต่อไปในประกาศนี้ เรียกว่า “กองโรคจากการประกอบอาชีพและสิ่งแวดล้อม” หรือ “เรา”) ดำเนินการ ในฐานะ ผู้ประมวลผลข้อมูลส่วนบุคคล ในข้อมูลส่วนบุคคลที่เก็บรวบรวมจากท่านเพื่อการดำเนินการภายใต้กิจกรรมการประมวลผลนี้
                        </p>
                        <p>กองโรคจากการประกอบอาชีพและสิ่งแวดล้อม ได้ทำการพัฒนา “ระบบประเมินออนไลน์สถานประกอบการ
                            ปลอดโรค ปลอดภัย กายใจเป็นสุข” เพื่อเป็นระบบประเมินและรับรองผลการดำเนินงานสถานประกอบการปลอดโรค ปลอดภัย กายใจเป็นสุข รวมถึงเป็นช่องทางการประสานข้อมูล และองค์ความรู้ที่เกี่ยวข้อง
                        </p>
                        <p>กองโรคจากการประกอบอาชีพและสิ่งแวดล้อม ในฐานะผู้ควบคุมข้อมูลส่วนบุคคล มีหน้าที่ต้องปฏิบัติตาม
                            พระราชบัญญัติคุ้มครองข้อมูลส่วนบุคคล พ.ศ. ๒๕๖๒ เพื่อให้การประมวลผลข้อมูลส่วนบุคคล เป็นไปตามที่กฎหมายกำหนด ทั้งนี้ กองโรคจากการประกอบอาชีพและสิ่งแวดล้อม ดำเนินการเกี่ยวกับการเก็บรวบรวม ใช้หรือเปิดเผยข้อมูลส่วนบุคคลของท่าน ดังนี้
                        </p>
                    </div>


                    <div>
                        <p className="font-bold text-start">1. วัตถุประสงค์การเก็บข้อมูล:</p>
                        <p className="indent-8">เราดำเนินการเก็บรวบรวมข้อมูลส่วนบุคคลของท่านเพื่อวัตถุประสงค์ในการประมวลผล และการบริหารจัดการ
                            เพื่อประโยชน์ในการพัฒนาและสนับสนุนการดำเนินงานสถานประกอบการปลอดโรค ปลอดภัย กายใจเป็นสุขให้มีประสิทธิภาพยิ่งขึ้น
                        </p>
                    </div>

                    <div>
                        <p className="font-bold text-start">2. ข้อมูลส่วนบุคคลที่เราเก็บรวบรวมและใช้</p>
                        <p className="indent-8">เราเก็บรวบรวมข้อมูลส่วนบุคคลของท่านโดยตรงผ่านการลงทะเบียนระบบประเมินออนไลน์สถานประกอบการ
                            ปลอดโรค ปลอดภัย กายใจเป็นสุข โดยรายการข้อมูลส่วนบุคคลที่เก็บรวบรวม มีดังนี้
                        </p>
                        <p className="indent-8">2.1 ข้อมูลระบุตัวตน เช่น ชื่อ นามสกุล ตำแหน่ง เลขทะเบียนโรงงาน 14 หลัก เลขทะเบียนนิติบุคคล 13 หลัก
                            รหัสหน่วยบริการ 5 หลัก
                        </p>
                        <p className="indent-8">2.2 ข้อมูลสำหรับการติดต่อ เช่น ชื่อหน่วยงาน ที่อยู่หน่วยงาน อีเมล หมายเลขโทรศัพท์มือถือ LINE ID
                        </p>
                        <p className="indent-8">2.3 ข้อมูลบัญชีผู้ใช้ เช่น ชื่อผู้ใช้ รหัสผ่านที่ใช้เข้าถึงเว็บไซต์
                        </p>
                    </div>

                    <div>
                        <p className="font-bold text-start">3. สิทธิตามพระราชบัญญัติคุ้มครองข้อมูลส่วนบุคคล พ.ศ. 2562 </p>
                        <p className="indent-8">ท่านสามารถใช้สิทธิตามพระราชบัญญัติคุ้มครองข้อมูลส่วนบุคคล พ.ศ. 2562 เมื่อบทบัญญัติในส่วนที่เกี่ยวกับสิทธิ
                            ของเจ้าของข้อมูลส่วนบุคคลมีผลใช้บังคับ ซึ่งมีรายละเอียดดังต่อไปนี้
                        </p>
                        <p className="indent-8">3.1. สิทธิในการเข้าถึง รับสำเนาและขอให้เปิดเผยที่มาของข้อมูลส่วนบุคคลของท่านที่เราเก็บรวบรวมอยู่ เว้นแต่กรณีที่เรามีสิทธิปฏิเสธคำขอของท่านตามกฎหมายหรือคำสั่งศาล หรือกรณีที่คำขอของท่านจะมีผลกระทบ
                            ที่อาจก่อให้เกิดความเสียหายต่อสิทธิและเสรีภาพของบุคคลอื่น
                        </p>
                        <p className="indent-8">3.2. สิทธิในการขอแก้ไขข้อมูลส่วนบุคคลของท่านที่ไม่ถูกต้องหรือไม่ครบถ้วน เพื่อให้มีความถูกต้อง เป็นปัจจุบัน สมบูรณ์ และไม่ก่อให้เกิดความเข้าใจผิด
                        </p>
                        <p className="indent-8">3.3. สิทธิในการขอให้ระงับการใช้ข้อมูลส่วนบุคคลของท่านในกรณีหนึ่งกรณีใดดังต่อไปนี้</p>
                        <p className="indent-16">3.3.1. เมื่ออยู่ในช่วงเวลาที่เราทำการตรวจสอบตามคำร้องขอของท่านให้แก้ไขข้อมูลส่วนบุคคลของท่านให้ถูกต้อง สมบูรณ์และเป็นปัจจุบัน</p>
                        <p className="indent-16">3.3.2. ข้อมูลส่วนบุคคลของท่านถูกเก็บรวบรวม ใช้หรือเปิดเผยโดยมิชอบด้วยกฎหมาย</p>
                        <p className="indent-8">3.3. สิทธิในการคัดค้านการเก็บรวบรวม ใช้ หรือเปิดเผยข้อมูลส่วนบุคคลของท่าน เว้นแต่กรณีที่เรามีเหตุในการปฏิเสธ
                            คำขอของท่านโดยชอบด้วยกฎหมาย (เช่น เราสามารถแสดงให้เห็นว่าการเก็บรวบรวม ใช้ หรือเปิดเผยข้อมูลส่วนบุคคล
                            ของท่านมีเหตุอันชอบด้วยกฎหมายยิ่งกว่า หรือเพื่อการก่อตั้งสิทธิเรียกร้องตามกฎหมาย การปฏิบัติตาม
                            หรือการใช้สิทธิเรียกร้องทางกฎหมาย หรือเพื่อประโยชน์สาธารณะตามภารกิจของเรา)
                        </p>
                    </div>

                    <div>
                        <p className="font-bold text-start">4. ระยะเวลาในการเก็บรักษาข้อมูลส่วนบุคคล</p>
                        <p className="indent-8">เราเก็บรักษาข้อมูลส่วนบุคคลของท่าน เป็นระยะเวลาเมื่อได้รับการสั่งการจากผู้มีอำนาจ ทั้งนี้ เมื่อพ้นระยะเวลาดังกล่าว
                            เราจะทำให้ข้อมูลส่วนบุคคลของท่านไม่สามารถระบุตัวตนได้ เพื่อการใช้ประโยชน์ด้านอื่น เช่น การวิเคราะห์ทางสถิติ การปรับปรุงประสิทธิภาพการทำงาน หรือประโยชน์สาธารณะที่สำคัญ
                        </p>
                    </div>

                    <div>
                        <p className="font-bold text-start">5. การรักษาความมั่นคงปลอดภัยข้อมูลส่วนบุคคล</p>
                        <p className="indent-8">เรามีมาตรการในการรักษาความมั่นคงปลอดภัยข้อมูลส่วนบุคคลของท่านอย่างเหมาะสม ทั้งในเชิงเทคนิค
                            และการบริหารจัดการ เพื่อป้องกันมิให้ข้อมูลสูญหาย หรือมีการเข้าถึง ทำลาย ใช้ เปลี่ยนแปลง แก้ไข หรือเปิดเผยข้อมูลส่วนบุคคล
                            โดยไม่ได้รับอนุญาต ซึ่งสอดคล้องกับนโยบายและแนวปฏิบัติด้านความมั่นคงปลอดภัยสารสนเทศ (Information Security Policy) ของเรา
                        </p>
                        <p className="indent-8">นอกจากนี้ เราได้กำหนดให้มีนโยบายการคุ้มครองข้อมูลส่วนบุคคลขึ้นโดยประกาศให้ทราบกันโดยทั่วทั้งองค์กร พร้อมแนวทางปฏิบัติเพื่อให้เกิดความมั่นคงปลอดภัยในการเก็บรวบรวม ใช้ และเปิดเผยข้อมูลส่วนบุคคล โดยธำรงไว้ซึ่งความเป็นความลับ (Confidentiality) ความถูกต้องครบถ้วน (Integrity) และสภาพพร้อมใช้งาน (Availability) ของข้อมูลส่วนบุคคล โดยเราได้จัดให้มีการทบทวนนโยบายดังกล่าวรวมถึงประกาศนี้ในระยะเวลาตามที่เหมาะสม</p>
                    </div>

                    <div>
                        <p className="font-bold text-start">6. ความรับผิดชอบของบุคคลซึ่งประมวลผลข้อมูลส่วนบุคคล</p>
                        <p className="indent-8">เราได้กำหนดให้เจ้าหน้าที่เฉพาะผู้ที่มีอำนาจหน้าที่เกี่ยวข้องในการจัดเก็บรวบรวม ใช้ และเปิดเผยข้อมูลส่วนบุคคล
                            ของกิจกรรมการประมวลผลนี้เท่านั้นที่จะสามารถเข้าถึงข้อมูลส่วนบุคคลของท่านได้ โดยเราจะดำเนินการให้เจ้าหน้าที่
                            ปฏิบัติตามประกาศนี้อย่างเคร่งครัด
                        </p>
                    </div>

                    <div>
                        <p className="font-bold text-start">7. การเปลี่ยนแปลงแก้ไขคำประกาศเกี่ยวกับความเป็นส่วนตัว</p>
                        <p className="indent-8">ในการปรับปรุงหรือเปลี่ยนแปลงประกาศนี้ เราอาจพิจารณาแก้ไขเปลี่ยนแปลงตามที่เห็นสมควร และจะทำการแจ้ง
                            ให้ท่านทราบผ่านช่องทาง เว็บไซต์ https://twhp.ddc.moph.go.th/ ของกองโรคจากการประกอบอาชีพและสิ่งแวดล้อม
                        </p>
                    </div>

                    <div>
                        <p className="font-bold text-start">8. ช่องทางการติดต่อ</p>
                        <p className="indent-8">ในกรณีที่เจ้าของข้อมูลต้องใช้สิทธิ หรือมีคำถามเกี่ยวกับการใช้สิทธิของตน หรือความยินยอมที่เจ้าของข้อมูลได้ให้ไว้ ท่านสามารถติดต่อได้ที่</p>
                        <p className="indent-8">เจ้าหน้าที่คุ้มครองข้อมูลส่วนบุคคล (Data Protection Officer: DPO)</p>
                        <p className="indent-8">กลุ่มอาชีวอนามัย กองโรคจากการประกอบอาชีพและสิ่งแวดล้อม กรมควบคุมโรค </p>
                        <p className="indent-8">อาคาร 11 ชั้น 2 ถนนติวานนท์ อำเภอเมืองนนทบุรี จังหวัดนนทบุรี 11000</p>
                        <p className="indent-8">โทรศัพท์ 0-2590-3865-66 หรืออีเมล occhealth.ddc@gmail.com</p>
                    </div>

                    <p className="pt-2">
                        ข้าพเจ้าได้อ่านและทำความเข้าใจข้อตกลงและเงื่อนไขฉบับนี้อย่างละเอียดถี่ถ้วนแล้ว
                        และยินยอมให้ทางโครงการฯ ดำเนินการเกี่ยวกับข้อมูลส่วนบุคคลของข้าพเจ้าตามที่ระบุไว้ข้างต้น
                    </p>

                    <div className="pt-6 flex justify-center">
                        <button
                            type="button"
                            onClick={() => setAcknowledged(true)}
                            className={`flex items-center justify-center gap-2 px-6 py-3 rounded-xl font-bold transition-all duration-200 border-2 w-full sm:w-auto ${acknowledged
                                ? "bg-green-100 text-green-800 border-green-200 cursor-default"
                                : "bg-white text-gray-700 border-gray-300 hover:bg-gray-100"
                                }`}
                        >
                            {acknowledged ? (
                                <>
                                    <CheckCircle2 size={18} /> รับทราบแล้ว
                                </>
                            ) : (
                                "รับทราบเงื่อนไข"
                            )}
                        </button>
                    </div>
                </div>

                {/* Footer Buttons */}
                <div className="p-6 border-t bg-white flex flex-col sm:flex-row justify-end gap-3">
                    {/* ปุ่มยืนยัน (กดได้เมื่อกดรับทราบแล้วเท่านั้น) */}
                    <button
                        type="button"
                        disabled={!acknowledged}
                        onClick={onConfirm}
                        className={`px-8 py-3 rounded-xl font-bold text-white transition-all duration-200 shadow-md ${acknowledged
                            ? "bg-[#2E8B57] hover:bg-[#257045] hover:scale-105"
                            : "bg-gray-400 cursor-not-allowed opacity-70"
                            }`}
                    >
                        ยืนยันและดำเนินการต่อ
                    </button>
                </div>
            </div>
        </div>
    );
}
